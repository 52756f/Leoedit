<div class="ai-header">
    <span>AI Assistant (OpenRouter)</span>
    <div class="ai-model-selector-container">
        <select id="ai-model-selector" class="ai-model-selector">
            <option value="anthropic/claude-3-haiku:nonefree" data-checked="true">ğŸ§¬ğŸ”¥ Claude 3 Haiku</option>
            <option value="cognitivecomputations/dolphin-mistral-24b-venice-edition:free" data-checked="true">ğŸ¬ Dolphin Mistral 24B Venice Edition</option>
            <option value="z-ai/glm-4.5-air:free" data-checked="true">ğŸ¤– GLM 4.5 Air</option>
            <option value="google/gemma-3-27b-it:free" data-checked="true">ğŸ¤– Gemma 3 27B IT</option>
            <option value="openai/gpt-4o-mini:nonefree" data-checked="true" data-outputpreis="0,6$" data-inputpreis="0,15$" data-maxoutput="16.4K" selected="selected">ğŸ”¥ GPT 4o mini</option>
            <option value="openai/gpt-5.2-pro:nonefree" data-checked="true">ğŸ§¬ GPT 5.2 Pro</option>
            <option value="kwaipilot/kat-coder-pro:free" data-checked="true">ğŸ¤– Kat Coder Pro</option>
            <option value="meta-llama/llama-3.1-405b-instruct:free" data-checked="true">ğŸ¦™ Llama 3.1 405B Instruct</option>
            <option value="meta-llama/llama-3.2-3b-instruct:free" data-checked="true">ğŸ¦™ Llama 3.2 3B Instruct</option>
            <option value="meta-llama/llama-3.3-70b-instruct:free" data-checked="true">ğŸ¦™ğŸ”¥ Llama 3.3 70B Instruct (fast)</option>
            <option value="mistralai/mistral-7b-instruct:free" data-checked="true">ğŸ¬ Mistral 7B Instruct</option>
            <option value="mistralai/mistral-small-3.1-24b-instruct:free">ğŸ¬ğŸ”¥ Mistral Small 3.1 24B Instruct (fast)</option>
            <option value="xiaomi/mimo-v2-flash:free" data-checked="true">ğŸŒ€ MiMo V2 Flash</option>
            <option value="nvidia/nemotron-3-nano-30b-a3b:free" data-checked="true">ğŸ’  Nemotron 3 Nano 30B</option>
            <option value="nvidia/nemotron-nano-12b-v2-vl:free" data-checked="true">ğŸ’  Nemotron Nano 12B V2 VL</option>
            <option value="nvidia/nemotron-nano-9b-v2:free" data-checked="true">ğŸ’  Nemotron Nano 9B V2</option>
            <option value="allenai/olmo-3-32b-think:free" data-checked="true">ğŸ¤– Olmo 3 32B</option>
            <option value="allenai/olmo-3.1-32b-think:free" data-checked="true">âš¡ Olmo 3.1 32B (slow)</option>
            <option value="qwen/qwen-2.5-coder-32b-instruct:nonefree" data-checked="true">ğŸ¼ğŸ”¥ Qwen 2.5 Coder 32B Instruct (fast)</option>
            <option value="qwen/qwen-2.5-vl-7b-instruct:free" data-checked="true">ğŸ¼ğŸ”¥ Qwen 2.5 VL 7B Instruct (fast)</option>
            <option value="qwen/qwen3-coder:free" data-checked="true">ğŸ¼ğŸ”¥ Qwen 3 Coder (fast)</option>
            <option value="arcee-ai/trinity-mini:free" data-checked="true">ğŸ¤– Trinity Mini</option>
            <option value="tngtech/tng-r1t-chimera:free" data-checked="true">ğŸ¤– TNG Chimera</option>
            <option value="nousresearch/hermes-3-llama-3.1-405b:free" data-checked="true">ğŸ¤– Hermes 3 Llama 3.1 405B</option>
            <option value="tngtech/deepseek-r1t-chimera:free" data-checked="true">ğŸ‰ DeepSeek R1T Chimera</option>
            <option value="tngtech/deepseek-r1t2-chimera:free" data-checked="true">ğŸ‰ DeepSeek R1T2 Chimera (slow)</option>
            <option value="nex-agi/deepseek-v3.1-nex-n1:free" data-checked="true">ğŸ‰ DeepSeek V3.1 Nex N1</option>
            <option value="mistralai/devstral-2512:free" data-checked="true">ğŸ›°ï¸ Devstral 2512</option>
        </select>
    </div>
    <button id="ai-toggle-btn" aria-label="Hide AI panel" title="Hide panel">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x">
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
        </svg>
    </button>
</div>

<!-- New Toolbar -->
<div class="ai-toolbar">
    <button id="clear-response-btn" class="toolbar-btn" title="Antwort lÃ¶schen">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18" />
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
        </svg>
        <span>LÃ¶schen</span>
    </button>
    
    <button id="print-pdf-btn" class="toolbar-btn" title="Als PDF drucken">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 6 2 18 2 18 9" />
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
            <rect x="6" y="14" width="12" height="8" />
        </svg>
        <span>PDF drucken</span>
    </button>
    
    <button id="copy-response-btn" class="toolbar-btn" title="Antwort kopieren">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
        </svg>
        <span>Kopieren</span>
    </button>
    
    <button id="refresh-response-btn" class="toolbar-btn" title="Antwort aktualisieren">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M23 4v6h-6" />
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
        </svg>
        <span>Aktualisieren</span>
    </button>
    
    <button id="fullscreen-btn" class="toolbar-btn" title="Vollbild umschalten">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 3 21 3 21 9" />
            <polyline points="9 21 3 21 3 15" />
            <line x1="21" y1="3" x2="14" y2="10" />
            <line x1="3" y1="21" x2="10" y2="14" />
        </svg>
        <span>Vollbild</span>
    </button>
</div>

<style>
    .ai-toolbar {
        display: flex;
        gap: 8px;
        padding: 8px 12px;
        background-color: #f5f5f5;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .toolbar-btn {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 6px 10px;
        background-color: white;
        border: 1px solid #d0d0d0;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        color: #333;
        transition: all 0.2s ease;
    }
    
    .toolbar-btn:hover {
        background-color: #f0f0f0;
        border-color: #c0c0c0;
    }
    
    .toolbar-btn:active {
        background-color: #e0e0e0;
    }
    
    .toolbar-btn svg {
        width: 16px;
        height: 16px;
    }
</style>

<script>
    // Clear Response button functionality
    document.getElementById('clear-response-btn').addEventListener('click', function() {
        // Assuming there's an element with class 'ai-response' that contains the AI response
        const responseElement = document.querySelector('.ai-response');
        if (responseElement) {
            responseElement.innerHTML = '';
        }
    });
    
    // Print as PDF button functionality
    document.getElementById('print-pdf-btn').addEventListener('click', function() {
        window.print();
    });
    
    // Copy Response button functionality
    document.getElementById('copy-response-btn').addEventListener('click', function() {
        const responseElement = document.querySelector('.ai-response');
        if (responseElement) {
            const textToCopy = responseElement.innerText;
            navigator.clipboard.writeText(textToCopy).then(() => {
                // Show a brief notification that text was copied
                const notification = document.createElement('div');
                notification.textContent = 'Antwort in Zwischenablage kopiert';
                notification.style.position = 'fixed';
                notification.style.bottom = '20px';
                notification.style.right = '20px';
                notification.style.padding = '10px 15px';
                notification.style.backgroundColor = '#4CAF50';
                notification.style.color = 'white';
                notification.style.borderRadius = '4px';
                notification.style.zIndex = '1000';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 2000);
            }).catch(err => {
                console.error('Kopieren fehlgeschlagen: ', err);
            });
        }
    });
    
    // Refresh Response button functionality
    document.getElementById('refresh-response-btn').addEventListener('click', function() {
        // This would trigger a new response with the same prompt
        // Implementation depends on your application's structure
        // For example, you might call a function like regenerateResponse()
        console.log('Refresh button clicked');
    });
    
    // Fullscreen button functionality
    document.getElementById('fullscreen-btn').addEventListener('click', function() {
        const aiPanel = document.querySelector('.ai-panel'); // Assuming there's an element with class 'ai-panel'
        if (aiPanel) {
            if (!document.fullscreenElement) {
                aiPanel.requestFullscreen().catch(err => {
                    console.error(`Fehler beim Aktivieren des Vollbildmodus: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }
    });
</script>
